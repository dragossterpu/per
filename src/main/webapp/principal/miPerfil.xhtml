<ui:composition template="/layouts/layoutInterior.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:p="http://primefaces.org/ui">
    <ui:define name="content">
    
        <ui:param name="titulo" value="Mi Perfil" />
        <f:event listener="#{navegacionBean.recomenzar(titulo, request.servletPath)}" type="preRenderView"/>
        <h3>#{titulo}</h3>
        
        <h:form>
        <div class="bloqueFormulario">
            <h4>Datos Personales</h4>
            <div class="columnaIzdaFormulario">
                <h:outputLabel for="nombre" value="Nombre:" />
                <p:inputText id="nombre" value="#{userBean.user.nombre}" disabled="true" />

                <h:outputLabel for="apellido1" value="Primer apellido:" />
                <p:inputText id="apellido1" value="#{userBean.user.apellido1}" disabled="true" />

                <h:outputLabel for="apellido2" value="Segundo apellido:" />
                <p:inputText id="apellido2" value="#{userBean.user.apellido2}" disabled="true" />

                <h:outputLabel for="docIdentidad" value="NIF: " />
                <p:inputText id="docIdentidad" value="#{userBean.user.docIdentidad}" disabled="true" />

            </div>
            <div class="columnaDchaFormulario">
                <h:outputLabel for="fechaAlta" value="Fecha alta:" />
                <p:inputText id="fechaAlta" value="#{userBean.user.fechaAlta}" disabled="true">
                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="Europe/Madrid" />
                </p:inputText>

                <h:outputLabel for="fechaDestino" value="Fecha destino IPSS:" />
                <p:inputText id="fechaDestino" value="#{userBean.user.fechaDestinoIPSS}" disabled="true">
                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="Europe/Madrid" />
                </p:inputText>

                <h:outputLabel for="fechaIngreso" value="Fecha de ingreso en el cuerpo:" />
                <p:inputText id="fechaIngreso" value="#{userBean.user.fechaIngreso}" disabled="true">
                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="Europe/Madrid" />
                </p:inputText>
                
                <h:outputLabel for="numIdentificacion" value="Número de identificación personal: " />
                <p:inputText id="numIdentificacion" value="#{userBean.user.numIdentificacion}"  disabled="true"/>
            </div>
        </div>

        <div class="bloqueFormulario">
            <h4>Datos de contacto</h4>

            <div class="columnaIzdaFormulario">
                <h:outputLabel for="telefono" value="Teléfono:" />
                <p:inputText id="telefono" value="#{userBean.user.telefono}" disabled="true" />

                <h:outputLabel for="telefonoMovilOficial" value="Teléfono móvil oficial:" />
                <p:inputText id="telefonoMovilOficial" value="#{userBean.user.telefonoMovilOficial}" disabled="true" />

                <h:outputLabel for="telefonoMovilParticular" value="Teléfono particular:" />
                <p:inputText id="telefonoMovilParticular" value="#{userBean.user.telefonoMovilParticular}" disabled="true" />
            </div>

            <div class="columnaDchaFormulario">
                <h:outputLabel for="correo" value="Correo electrónico:" />
                <p:inputText id="correo" value="#{userBean.user.correo}" disabled="true" />

                <h:outputLabel for="despacho" value="Despacho:" />
                <p:inputText id="despacho" value="#{userBean.user.despacho}" disabled="true" />
            </div>

        </div>
        <div class="bloqueFormulario">
            <h4>Perfil</h4>

            <div class="columnaIzdaFormulario">
                <h:outputLabel for="username" value="Nombre usuario:" />
                <p:inputText id="username" value="#{userBean.user.username}" disabled="true" />

                <h:outputLabel for="estado" value="Estado:" />
                <p:inputText id="estado" value="#{userBean.user.estado}" disabled="true" />

                <h:outputLabel for="role" value="Rol:" />
                <p:inputText id="role" value="#{userBean.user.role.descripcion}" disabled="true" />

                <h:outputLabel for="puestoTrabajo" value="Puesto de trabajo:" />
                <p:inputText id="puestoTrabajo" value="#{userBean.user.puestoTrabajo.descripcion}" disabled="true" />

                <h:outputLabel for="nivel" value="Nivel:" />
                <p:inputText id="nivel" value="#{userBean.user.nivel}" disabled="true" />
            </div>

            <div class="columnaDchaFormulario">
                <h:outputLabel for="cuerpoEstado" value="Cuerpo del estado:" />
                <p:inputText id="cuerpoEstado" value="#{userBean.user.cuerpoEstado.descripcion}" disabled="true" />

                <h:outputLabel for="empleo" value="Empleo:" />
                <p:inputText id="empleo" value="#{userBean.user.empleo.descripcion}" disabled="true" />

                <h:outputLabel for="departamento" value="Departamento:" />
                <p:inputText id="departamento" value="#{userBean.user.departamento.descripcion}" disabled="true" />

                <h:outputLabel for="categoria" value="Categoria:" />
                <p:inputText id="categoria" value="#{userBean.user.categoria}" disabled="true" />

                <h:outputLabel for="clase" value="Clase:" />
                <p:inputText id="clase" value="#{userBean.user.claseUsuario.clase}" disabled="true" />
            </div>
        </div>
        </h:form>
        
        <h:form id="passwordForm">
        <div class="bloqueFormulario">
        <h4>Contraseña</h4>
            <div class="columnaIzdaFormulario">
                <h:outputLabel for="claveActual" value="Contraseña actual:" />
                <p:password value="#{miPerfilBean.claveActual}" required="true"  id="claveActual" requiredMessage="Introduzca la contraseña actual" />

                <h:outputLabel for="claveNueva" value="Nueva contraseña:" />
                <p:password value="#{miPerfilBean.claveNueva}" required="true" feedback="true" id="claveNueva" requiredMessage="Introduzca la nueva contraseña" promptLabel="Por favor, introduce una contraseña" weakLabel="Débil" goodLabel="Buena" strongLabel="Fuerte" />

                <h:outputLabel for="claveConfirm" value="Confirmar contraseña:" />
                <p:password value="#{miPerfilBean.claveConfirm}" required="true" feedback="true" id="claveConfirm" requiredMessage="Repita la nueva contraseña" promptLabel="Por favor, introduce una contraseña" weakLabel="Débil" goodLabel="Buena" strongLabel="Fuerte" />

                <p:commandButton id="guardar" value="Guardar" action="#{miPerfilBean.cambiarClave}" update="passwordForm" icon="fa fa-save" title="Guardar la contraseña"/>
                <p:commandButton value="Limpiar" update="passwordForm" process="@this" title="Limpiar el formulario" icon="fa fa-eraser">
                    <p:resetInput target="passwordForm" />
                </p:commandButton>                
                <p:commandButton value="Cancelar" icon="fa fa-fw fa-undo" title="Cancelar y volver a la pantalla principal" action="/index?faces-redirect=true" immediate="true">
                     <p:confirm header="Cancelar" message="¿Está seguro que desea cancelar esta operación?. Se perderán los datos introducidos" icon="fa fa-warning-sign" />
                </p:commandButton>
                 <p:button id="volver" value="Volver" outcome="/index" title="Volver a la pantalla principal"/>
            
                <p:messages id="messages" autoUpdate="true" closable="true" />   
           </div>
                
            <p:dialog id="dialog" widgetVar="dialogMessage" header="INFO" closable="false">
               <p:messages for="dialogMessage" autoUpdate="true" showDetail="true" showSummary="true" />
               <div class="centrarBotonesDialog">
                   <p:button value="Cerrar" outcome="/index" />
               </div>
           </p:dialog>

            <p:confirmDialog global="true">
                <div class="centrarBotonesDialog">
                    <p:button value="Aceptar" styleClass="ui-confirmdialog-yes" icon="fa fa-check" />
                    <p:button value="Cancelar" styleClass="ui-confirmdialog-no" icon="fa fa-remove" />
                </div>
            </p:confirmDialog>
        </div>
        </h:form>
        
    </ui:define>
</ui:composition>
