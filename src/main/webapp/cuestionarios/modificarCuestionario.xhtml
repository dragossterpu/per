<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<f:view>
	<ui:composition template="../layouts/layoutInterior.xhtml">
		<ui:define name="content">
			<ui:param name="esJefeEquipoInspeccion" value="#{cuestionarioEnviadoBean.esJefeEquipoInspeccion() or p:ifAnyGranted('JEFE_INSPECCIONES,ADMIN')}"/>

			<h3>Envío de cuestionario</h3>
			
			<div class="aclaraciones">
				Los campos marcados con (*) son obligatorios
			</div>

			<h:form id="envioCuestionario" >
		
				<div class="bloqueFormulario">
					<h:outputLabel for="infoInspeccion" value="Nombre Unidad - Número Inspección:" />
					<p:inputText id="infoInspeccion" value="#{cuestionarioEnviadoBean.cuestionarioSeleccionado.inspeccion.nombreUnidad} - #{cuestionarioEnviadoBean.cuestionarioSeleccionado.inspeccion.numero}" disabled="true"/>
					
					<h:outputLabel for="nombre" value="Nombre:" />
					<p:inputText id="nombre" value="#{cuestionarioEnviadoBean.cuestionarioSeleccionado.nombreUsuarioEnvio}" disabled="true"/>
					
					<h:outputLabel for="cargo" value="Cargo:" />
					<p:inputText id="cargo" value="#{cuestionarioEnviadoBean.cuestionarioSeleccionado.cargo}" disabled="true"/>
					
					<h:outputLabel for="correo" value="Correo electrónico:" />
					<p:inputText id="correo" value="#{cuestionarioEnviadoBean.cuestionarioSeleccionado.correoEnvio}" disabled="true"/>
					
					<h:outputLabel for="fechaLimite" value="Fecha límite de respuesta (*):" />
					<p:calendar id="fechaLimite"
						value="#{cuestionarioEnviadoBean.cuestionarioSeleccionado.fechaLimiteCuestionario}"
						pattern="dd/MM/yyyy" locale="es"
						mindate="#{utilities.getCurrentDate()}"
						navigator="true" required="true"
						requiredMessage="Es obligatorio una fecha limite de cumplimentación del cuestionario" 
						disabled="#{not empty cuestionarioEnviadoBean.cuestionarioSeleccionado.fechaFinalizacion and esJefeEquipoInspeccion}"/>
					
					<h:outputLabel for="motivo" value="Motivo del cuestionario:" />
					<p:inputTextarea id="motivo" value="#{cuestionarioEnviadoBean.cuestionarioSeleccionado.motivoCuestionario}" disabled="true"/>
					
					<p:messages for="mensajeerror" autoUpdate="true" showDetail="true" showSummary="true"/>
				</div>
			
				<div class="botonesFormulario">
					<p:commandButton actionListener="#{cuestionarioEnviadoBean.modificarCuestionario}" value="Guardar" icon="fa fa-fw fa-save" rendered="#{empty cuestionarioEnviadoBean.cuestionarioSeleccionado.fechaFinalizacion and esJefeEquipoInspeccion}"/>
					<p:button outcome="/cuestionarios/busquedaCuestionarios" value="Cancelar" icon="fa fa-fw fa-undo"/>
				</div>
				
				<p:dialog id="dialog" widgetVar="dialogMessage" header="INFO">
					<p:ajax event="close" listener="#{facesUtilities.redirect('/cuestionarios/busquedaCuestionarios')}" />
					<p:messages for="dialogMessage" autoUpdate="true" showDetail="true" showSummary="true"/>
					<div class="centrarBotonesDialog">
						<p:commandButton value="Cerrar" actionListener="#{facesUtilities.redirect('/cuestionarios/busquedaCuestionarios')}" />
					</div>
				</p:dialog>
			</h:form>
			
		</ui:define>
	</ui:composition>
</f:view>
</html>
