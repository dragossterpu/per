<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<ui:composition template="../layouts/layoutInterior.xhtml">
		<ui:define name="content">

		<h3>Modificar Solicitud docmentación previa cuestionario</h3>
		<div class="aclaraciones">
			Los campos marcados con (*) son obligatorios
		</div>
		
		<h:form id="formAlta">
			<div class="bloqueFormulario">
					<h4>Datos Personales</h4>
					<p:messages />
					<div class="columnaIzdaFormulario">
						<h:outputLabel for="infoInspeccion" value="Nombre Unidad y Número Inspección (*):" />
						<p:autoComplete id="infoInspeccion" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.inspeccion}" completeMethod="#{solicitudDocPreviaBean.autocompletarInspeccion}"
	                        var="inspeccion" itemLabel="#{inspeccion.nombreUnidad} - #{inspeccion.numero}" itemValue="#{inspeccion}" converter="#{selectConverter}" forceSelection="true" 
	                        required="true" requiredMessage="Introduzca la unidad o el número de la inspección" onfocus="if (this.value == ' - '){this.value = '';}" queryDelay="1000"
	                        disabled="#{not empty solicitudDocPreviaBean.solicitudDocumentacionPrevia.fechaEnvio}">
	                        <p:ajax event="itemSelect" update="tipoInspeccion ambitoInspeccion" />
                        </p:autoComplete>
                        
						<h:outputLabel for="tipoInspeccion" value="Carácter inspección:" />
						<p:inputText id="tipoInspeccion" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.inspeccion.tipoInspeccion.descripcion}" 
							disabled="true"/>
																						
						<h:outputLabel for="ambitoInspeccion" value="Ámbito inspección:" />
						<p:inputText id="ambitoInspeccion" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.inspeccion.ambito}" 
							disabled="true"/>
						
						<h:outputLabel for="asunto" value="Asunto (*):" />
						<p:inputText id="asunto" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.asunto}" required="true" requiredMessage="Es obligatorio un asunto" converter="#{trimConverter}"
							disabled="#{not empty solicitudDocPreviaBean.solicitudDocumentacionPrevia.fechaEnvio}"/>
										
						<h:outputLabel for="destinatario" value="Destinatario (*):" />
						<p:inputText id="destinatario" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.destinatario}" required="true" requiredMessage="Es obligatorio un destinatario" converter="#{trimConverter}"
							disabled="#{not empty solicitudDocPreviaBean.solicitudDocumentacionPrevia.fechaEnvio}"/>
									
						<h:outputLabel for="correoDestinatario" value="Correo destinatario (*):" />
						<p:inputText id="correoDestinatario" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.correoDestinatario}" required="true" requiredMessage="Es obligatorio un correo del destinatario" converter="#{trimConverter}"
							disabled="#{not empty solicitudDocPreviaBean.solicitudDocumentacionPrevia.fechaEnvio}">
							<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
						</p:inputText>
				
						<h:outputLabel for="fechaLimiteEnvio" value="Fecha límite envío documentación (*):" />
						<p:calendar id="fechaLimiteEnvio" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.fechaLimiteEnvio}" pattern="dd/MM/yyyy" navigator="true" required="true" requiredMessage="Es obligatorio una fecha limite envío documentación"/>
											
						<h:outputLabel for="fechaLimiteCumplimentar" value="Fecha límite cumplimentar cuestionario (*):" />
						<p:calendar id="fechaLimiteCumplimentar" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.fechaLimiteCumplimentar}" pattern="dd/MM/yyyy" navigator="true" required="true" requiredMessage="Es obligatorio una fecha limite cumplimentar cuestionario"
							disabled="#{not empty solicitudDocPreviaBean.solicitudDocumentacionPrevia.fechaEnvio}"/>					

					</div>
	
					<div class="columnaDchaFormulario">
						<h:outputLabel for="apoyoPuesto" value="Puesto persona apoyo:" />
						<p:inputText id="apoyoPuesto" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.apoyoPuesto}" />
											
						<h:outputLabel for="apoyoNombre" value="Nombre persona apoyo:" />
						<p:inputText id="apoyoNombre" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.apoyoNombre}"/>
											
						<h:outputLabel for="apoyoTelefono" value="Teléfono persona apoyo:" />
						<p:inputText id="apoyoTelefono" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.apoyoTelefono}" />
											
						<h:outputLabel for="apoyoCorreo" value=" Correo persona apoyo:" />
						<p:inputText id="apoyoCorreo" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.apoyoCorreo}"/>
													
						<h:outputLabel for="cuatrimestre" value="Cuatrimestre (*):" />
						<p:importEnum
							type="es.mira.progesin.persistence.entities.enums.CuatrimestreEnum"
							var="cuatrimestres" allSuffix="ALL_ENUM_VALUES" />
						<p:selectOneMenu id="cuatrimestre" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.cuatrimestre}" effect="fold" required="true" requiredMessage="Es obligatorio el cuartrimestre">
							<f:selectItems value="#{cuatrimestres.ALL_ENUM_VALUES}"
								var="cuatrimestreSolicitudDocPrevia"
								itemLabel="#{cuatrimestreSolicitudDocPrevia.descripcion}"
								itemValue="#{cuatrimestreSolicitudDocPrevia}" />
						</p:selectOneMenu>
						
						<h:outputLabel for="anio" value="Año (*):" />
						<p:inputNumber id="anio" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.anio}" required="true" requiredMessage="Es obligatorio un año" maxValue="9999" decimalSeparator="" thousandSeparator="" decimalPlaces="0" />
						
						<h:outputLabel for="descargaPlantillas" value="Permitir descarga plantillas:" />
						<p:selectBooleanCheckbox id="descargaPlantillas" value="#{solicitudDocPreviaBean.solicitudDocumentacionPrevia.descargaPlantillas}" />
																										
					</div>
			</div>
	
			
			<div class="botonesFormulario">
				<p:commandButton actionListener="#{solicitudDocPreviaBean.modificarSolicitud}" value="Guardar cambios" icon="fa fa-fw fa-save"/>
				<p:button outcome="/solicitudesPrevia/busquedaSolicitudesDocPrevia" value="Cancelar" icon="fa fa-fw fa-undo"/>
			</div>
			
			<p:dialog id="dialog" widgetVar="dialogMessage" header="INFO">
				<p:ajax event="close" listener="#{facesUtilities.redirect('/solicitudesPrevia/busquedaSolicitudesDocPrevia')}" />
				<p:messages for="dialogMessage" autoUpdate="true" showDetail="true" showSummary="true"/>
				<div class="centrarBotonesDialog">
					<p:commandButton value="Cerrar" actionListener="#{facesUtilities.redirect('/solicitudesPrevia/busquedaSolicitudesDocPrevia')}" />
				</div>
			</p:dialog>
			
		</h:form>
		
		</ui:define>
	</ui:composition>
</f:view>
</html>
